<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="/static/script/htmx.min.js"></script>
  <script src="/static/script/tailwindcss.min.js"></script>
  <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicon.png">
</head>

<body>
  <div class="container mx-auto p-8">
    <div class="flex gap-3 sm:gap-10 flex-col md:flex-row justify-between">
      <div class="w-full md:w-1/2 mb-4">
        <h2 class="text-lg font-bold mb-4">Inserir novo fundo de investimento</h2>
        <form id="newFundForm" action="/funds" method="post">
          <!-- <form id="newFundForm" hx-post="/funds" hx-target="#fundsList" hx-swap="beforeend"> -->
          <div class="mb-4">
            <label for="fundName" class="block text-gray-700">Nome:</label>
            <input type="text" id="fundName" name="name" class="form-input w-full bg-gray-200 border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div class="mb-4">
            <label for="fundCnpj" class="block text-gray-700">Cnpj:</label>
            <input type="text" id="fundCnpj" name="cnpj" class="form-input w-full bg-gray-200 border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div class="mb-4">
            <label for="fundBank" class="block text-gray-700">Banco:</label>
            <input type="text" id="fundBank" name="bank" class="form-input w-full bg-gray-200 border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div class="mb-4">
            <label for="fundMinValue" class="block text-gray-700">Valor mínimo de investimento:</label>
            <input type="number" step="0.01" id="fundMinValue" name="minValue" class="form-input w-full bg-gray-200 border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          <div class="mb-4">
            <label for="fundMinValue" class="block text-gray-700">Índice de comparação:</label>
            <select name="benchmark" id="benchmark" class="form-input w-full bg-gray-200 border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option selected="true" disabled="disabled">Escolha o índice</option>
              <option value="ipca">IPCA</option>
              <option value="cdi">CDI</option>
              <option value="ibovespa">IBOVESPA</option>
              <option value="outro">OUTRO</option>
            </select>
          </div>
          <div class="mb-4">
            <label for="fundSubCategory" class="block text-gray-700">Categoria:</label>
            <select name="subCategory" id="fundSubCategory" class="form-input w-full bg-gray-200 border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
            {{ range .Categories }}
            <optgroup label="{{ .Name }}">
              {{ range .SubCategories }}
              <option value="{{ .ID }}">{{ .Name }}</option>
              {{ end }}
            </optgroup>
            {{ end }}
            </select>
          </div>
          <div>
            <label for="notes" class="block text-gray-700">Anotações:</label>
            <div id="notesList">
              <input type="text" id="notes" name="notes" class="form-input w-full bg-gray-200 border border-gray-300 rounded-md px-2 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div class="mt-3 flex justify-end">
              <button type="button" hx-get="/elements/funds/note" hx-trigger="click" hx-target="#notesList" hx-swap="beforeend" class="focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-xs px-3 py-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800">Nova anotação</button>
            </div>
          </div>
          <div class="flex w-full mt-5">
            <button type="submit" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-600 w-full">Salvar</button>
          </div>
          
        </form>
      </div>
      <div class="w-full md:w-1/2">
        <h2 class="text-lg font-bold mb-4">Fundos</h2>
        <ul class="list-none" id="fundsList">
          {{ range .Funds }}
          <li class="py-2"><a class="hover:underline uppercase" href="/funds/{{.ID}}">{{.Name}}</a></li>
          {{ end }}
        </ul>
      </div>
    </div>
  </div>
  <script src="/static/script/script.js"></script>
</body>

</html>